#!/usr/bin/node
(()=>{"use strict";var e={17:(e,r,t)=>{const o=t(747),s=t(93),a=t(873),i=t(765),n=process.argv.splice(2),c=a.validateFilePath(n[0],{what:"source file",needsExist:!0}),l=a.validateFilePath(n[1],{what:"output file"}),u=n.splice(2).map((e=>a.validateFilePath(e,{what:"resource file"})));0===u.length&&(console.error("Specify at least one resource file"),i.exit(-1));const p=o.readFileSync(c).toString(),d=u.map((e=>s.deserializeResources(o.readFileSync(e).toString()))),f=s.applyResources(p,...d);o.writeFileSync(l,Buffer.from(f))},873:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.validateFilePath=void 0;const o=t(747),s=t(765);r.validateFilePath=(e,r)=>{const{needsExist:t,what:a}=r;return e||(console.error(`Specify ${a}`),s.exit(-1)),t&&!o.existsSync(e)&&(console.error(`Cannot locate '${e}'`),s.exit(-1)),e}},93:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.pseudoLocalize=r.getPseudoLocaliation=r.deserializeResources=r.serializeResources=r.applyResources=r.extractRawText=void 0,r.extractRawText=(e,r,t)=>{const{prefix:o}=t||{},s=`([^a-zA-Z_])(${e.join("|")})="([^"]+)"`,a=RegExp(s,"g"),i=new Map,n=new Map;let c=0;return{output:r.replace(a,((e,r,t,s)=>`${r}${t}="(${(e=>{const r=n.get(e);if(void 0!==r)return r;const t=`${o}${o?"/":""}RSC_${c++}`;return i.set(t,e),n.set(e,t),t})(s)})"`)),resources:i}},r.applyResources=(e,...r)=>{const t=`"\\((${Array.from(new Set(r.map((e=>Array.from(e.keys()))).reduce(((e,r)=>e.concat(r)),[]))).join("|")})\\)"`,o=RegExp(t,"g");return e.replace(o,((e,t)=>`"${(e=>{for(const t of r){const r=t.get(e);if(r)return r}return""})(t)||""}"`))},r.serializeResources=e=>{const r={};for(const t of e.keys()){const o=e.get(t)||"";r[t]=o}return JSON.stringify(r,null,1)},r.deserializeResources=e=>{try{const r=JSON.parse(e),t=Object.keys(r);return Array.from(t).reduce(((e,t)=>(e.set(t,r[t]||""),e)),new Map)}catch(e){throw new Error(`Unable to deserialize: ${e}`)}};const t={a:"α",e:"ε",i:"ι",o:"Ω",u:"υ"};r.getPseudoLocaliation=e=>{let r=!1;return Array.from(e).reduce(((e,o)=>{const s=o.toLowerCase();return r="$"===o||r&&"a"<=s&&s<="z",e+(r?o:t[s]||s)}),"")},r.pseudoLocalize=e=>{const t=new Map;for(const o of e.keys()){const s=e.get(o)||"";t.set(o,r.getPseudoLocaliation(s))}return t}},747:e=>{e.exports=require("fs")},765:e=>{e.exports=require("process")}},r={};!function t(o){if(r[o])return r[o].exports;var s=r[o]={exports:{}};return e[o](s,s.exports,t),s.exports}(17)})();
//# sourceMappingURL=applyrsc.js.map